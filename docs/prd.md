# Benefits Enrollment MVP PRD

## 1. Product Summary

Build a US-only, multi-tenant benefits enrollment web app with three roles:

- Full Admin (platform-level)
- Company Admin (single tenant)
- Employee (single tenant)

MVP supports only:

- Benefit types: Medical, Dental, Vision
- Premium cadence: Monthly only
- Dependents: Spouse and Child
- Child age rule: Child dependents must be under age 26

## 2. Goals and Success Criteria

### Goals

- Enable platform Full Admins to create and manage company tenants.
- Enable Company Admins to configure plan years, plans, and premiums.
- Enable Employees to enroll in benefits for themselves and eligible dependents.

### MVP Success Criteria

- All three roles can complete their core workflows end-to-end using defined constraints.
- Multi-tenant data isolation is enforced for Company Admin and Employee roles.
- Enrollment effective-date logic is enforced correctly.

## 3. Users and Roles

### Full Admin

- Can view all tenants.
- Can edit all tenant data.
- Can create company-level invite codes for Company Admin signup.
- No impersonation in MVP.

### Company Admin

- Belongs to exactly one company, permanently.
- Can manage only their own company data.
- Can create invite codes for Employee signup.
- Can configure plan years, plans, and tier premiums.

### Employee

- Belongs to exactly one company.
- Can enroll in eligible benefits.
- Can include spouse/child dependents (subject to child age limit).

## 4. Functional Requirements

### 4.1 Multi-Tenant and Company Identity

- Each company tenant has:
  - Unique `company_id` (globally unique).
  - Company name (not required to be unique).
- `company_id` creation:
  - System-generated by default.
  - Optional user-defined override.
  - Enforce strict character and length policy.
  - Enforce global uniqueness.

### 4.2 Authentication and Signup

- Authentication is email/password only.
- Self-signup requires valid invite code.
- Invite code creation:
  - Full Admin creates codes for Company Admin role.
  - Company Admin creates codes for Employee role.
- Company Admin and Employee can access only their own company context.

### 4.3 Employee Profile and Eligibility Inputs

Required employee fields:

- Employee ID
- First name
- Last name
- Date of birth
- Hire date
- Salary
- Benefit class (`FULL_TIME_ELIGIBLE` or `INELIGIBLE`)
- Employment status (`ACTIVE` or `TERMED`)

Eligibility rule:

- Only `FULL_TIME_ELIGIBLE` and `ACTIVE` employees are eligible.
- Effective date:
  - If hired in current calendar month: first day of next month.
  - If hired before current calendar month: effective today.

### 4.4 Plan Years, Plans, and Premiums

- Plan years are tenant-specific.
- Future plan years can be created.
- Plan years cannot overlap within the same tenant.
- Plan metadata required:
  - Carrier
  - Plan name
  - Plan type (`MEDICAL`, `DENTAL`, `VISION`)
- Premiums:
  - Monthly only
  - Coverage-tier based only
  - Must store employee and employer monthly amounts
  - Supported tiers:
    - Employee Only
    - Employee + Spouse
    - Employee + Child(ren)
    - Family

### 4.5 Enrollment

- Enrollment submission flow includes:
  - Save draft
  - Submit
  - Confirmation view/receipt payload
- No admin approval step.
- Submission auto-finalizes election.
- No post-submit changes in MVP.
- No life events in MVP.
- No explicit enrollment window controls in MVP.

## 5. Non-Functional Requirements (MVP)

- Basic security only:
  - Password hashing
  - Auth session/token protection
  - Tenant access checks on every protected request
  - Server-side validation for role and tenant constraints
- No HIPAA/ACA advanced compliance controls in MVP scope.

## 6. Out of Scope (Explicit)

- Payroll frequency calculations
- Benefit types beyond medical/dental/vision
- Dependents beyond spouse/child
- Child over-age exception workflows
- Life events / QLE workflows
- COBRA/termination workflows
- Notifications
- Audit trail
- Reporting/exports
- Document uploads
- Admin impersonation
- Multi-company assignment per user

## 7. Acceptance Criteria

- Full Admin can create tenant and create Company Admin invite code.
- Company Admin can sign up via invite, create plan year, create plans, and set tier premiums.
- Company Admin can create Employee invite code.
- Employee can sign up via invite, maintain profile data, add eligible dependents, and submit enrollment.
- System rejects child dependent age >= 26 at effective date.
- System enforces no overlapping plan years per tenant.
- System enforces tenant boundaries for Company Admin and Employee access.
